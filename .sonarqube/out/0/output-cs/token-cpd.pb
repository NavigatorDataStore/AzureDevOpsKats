Ž
AD:\Build\AzureDevOpsKats\src\AzureDevOpsKats.Data\Entities\Cat.cs
	namespace 	
AzureDevOpsKats
 
. 
Data 
. 
Entities '
{ 
public 

class 
Cat 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public		 
string		 
Description		 !
{		" #
get		$ '
;		' (
set		) ,
;		, -
}		. /
public 
string 
Photo 
{ 
get !
;! "
set# &
;& '
}( )
} 
} ¨R
MD:\Build\AzureDevOpsKats\src\AzureDevOpsKats.Data\Repository\CatRepository.cs
	namespace 	
AzureDevOpsKats
 
. 
Data 
. 

Repository )
{ 
public 

class 
CatRepository 
:  
ICatRepository! /
{		 
private

 
readonly

 
SqliteConnection

 )
_dbConnection

* 7
;

7 8
public 
CatRepository 
( 
string #

connection$ .
). /
{ 	
_dbConnection 
= 
new 
SqliteConnection  0
(0 1

connection1 ;
); <
;< =
} 	
public 
IEnumerable 
< 
Cat 
> 
GetCats  '
(' (
)( )
{ 	
Open 
( 
) 
; 
List 
< 
Cat 
> 
cats 
= 
new  
List! %
<% &
Cat& )
>) *
(* +
)+ ,
;, -
using 
( 
var 
command 
=  
_dbConnection! .
.. /
CreateCommand/ <
(< =
)= >
)> ?
{ 
command 
. 
CommandText #
=$ %
$str& b
;b c
var 
result 
= 
command $
.$ %
ExecuteReader% 2
(2 3
)3 4
;4 5
while 
( 
result 
. 
Read "
(" #
)# $
)$ %
{ 
var 
cat 
= 
new !
Cat" %
{ 
Id 
= 
result #
.# $
GetInt32$ ,
(, -
$num- .
). /
,/ 0
Name 
= 
result %
.% &
	GetString& /
(/ 0
$num0 1
)1 2
!=3 5
null6 :
?; <
result= C
.C D
	GetStringD M
(M N
$numN O
)O P
:Q R
nullS W
,W X
Description   #
=  $ %
result  & ,
.  , -
	GetString  - 6
(  6 7
$num  7 8
)  8 9
!=  : <
null  = A
?  B C
result  D J
.  J K
	GetString  K T
(  T U
$num  U V
)  V W
:  X Y
null  Z ^
,  ^ _
Photo!! 
=!! 
result!!  &
.!!& '
	GetString!!' 0
(!!0 1
$num!!1 2
)!!2 3
!=!!4 6
null!!7 ;
?!!< =
result!!> D
.!!D E
	GetString!!E N
(!!N O
$num!!O P
)!!P Q
:!!R S
null!!T X
,!!X Y
}"" 
;"" 
cats$$ 
.$$ 
Add$$ 
($$ 
cat$$  
)$$  !
;$$! "
}%% 
}&& 
return(( 
cats(( 
;(( 
})) 	
public++ 
Cat++ 
GetCat++ 
(++ 
int++ 
id++  
)++  !
{,, 	
Open-- 
(-- 
)-- 
;-- 
using.. 
(.. 
var.. 
command.. 
=..  
_dbConnection..! .
.... /
CreateCommand../ <
(..< =
)..= >
)..> ?
{// 
command00 
.00 
CommandText00 #
=00$ %
$str00& f
;00f g
command11 
.11 

Parameters11 "
.11" #
Add11# &
(11& '
new11' *
SqliteParameter11+ :
(11: ;
$str11; D
,11D E
id11F H
)11H I
)11I J
;11J K
var33 
result33 
=33 
command33 $
.33$ %
ExecuteReader33% 2
(332 3
)333 4
;334 5
if44 
(44 
result44 
==44 
null44 "
)44" #
return55 
null55 
;55  
result77 
.77 
Read77 
(77 
)77 
;77 
var88 
cat88 
=88 
new88 
Cat88 !
{99 
Id:: 
=:: 
result:: 
.::  
GetInt32::  (
(::( )
$num::) *
)::* +
,::+ ,
Name;; 
=;; 
result;; !
.;;! "
	GetString;;" +
(;;+ ,
$num;;, -
);;- .
,;;. /
Description<< 
=<<  !
result<<" (
.<<( )
	GetString<<) 2
(<<2 3
$num<<3 4
)<<4 5
,<<5 6
Photo== 
=== 
result== "
.==" #
	GetString==# ,
(==, -
$num==- .
)==. /
,==/ 0
}>> 
;>> 
return@@ 
cat@@ 
;@@ 
}AA 
}BB 	
publicDD 
voidDD 
EditCatDD 
(DD 
CatDD 
catDD  #
)DD# $
{EE 	
usingFF 
(FF 
_dbConnectionFF  
)FF  !
{GG 
OpenHH 
(HH 
)HH 
;HH 
usingII 
(II 
varII 
commandII "
=II# $
_dbConnectionII% 2
.II2 3
CreateCommandII3 @
(II@ A
)IIA B
)IIB C
{JJ 
commandKK 
.KK 
CommandTextKK '
=KK( )
$strKK* t
;KKt u
commandLL 
.LL 

ParametersLL &
.LL& '
AddLL' *
(LL* +
newLL+ .
SqliteParameterLL/ >
(LL> ?
$strLL? H
,LLH I
catLLJ M
.LLM N
NameLLN R
)LLR S
)LLS T
;LLT U
commandMM 
.MM 

ParametersMM &
.MM& '
AddMM' *
(MM* +
newMM+ .
SqliteParameterMM/ >
(MM> ?
$strMM? H
,MMH I
catMMJ M
.MMM N
DescriptionMMN Y
)MMY Z
)MMZ [
;MM[ \
commandNN 
.NN 

ParametersNN &
.NN& '
AddNN' *
(NN* +
newNN+ .
SqliteParameterNN/ >
(NN> ?
$strNN? H
,NNH I
catNNJ M
.NNM N
IdNNN P
)NNP Q
)NNQ R
;NNR S
commandPP 
.PP 
ExecuteNonQueryPP +
(PP+ ,
)PP, -
;PP- .
}QQ 
}RR 
}SS 	
publicUU 
voidUU 
	CreateCatUU 
(UU 
CatUU !
catUU" %
)UU% &
{VV 	
usingWW 
(WW 
_dbConnectionWW  
)WW  !
{XX 
OpenYY 
(YY 
)YY 
;YY 
usingZZ 
(ZZ 
varZZ 
commandZZ "
=ZZ# $
_dbConnectionZZ% 2
.ZZ2 3
CreateCommandZZ3 @
(ZZ@ A
)ZZA B
)ZZB C
{[[ 
command\\ 
.\\ 
CommandText\\ '
=\\( )
$str\\* y
;\\y z
command]] 
.]] 

Parameters]] &
.]]& '
Add]]' *
(]]* +
new]]+ .
SqliteParameter]]/ >
(]]> ?
$str]]? H
,]]H I
cat]]J M
.]]M N
Name]]N R
)]]R S
)]]S T
;]]T U
command^^ 
.^^ 

Parameters^^ &
.^^& '
Add^^' *
(^^* +
new^^+ .
SqliteParameter^^/ >
(^^> ?
$str^^? H
,^^H I
cat^^J M
.^^M N
Description^^N Y
)^^Y Z
)^^Z [
;^^[ \
command__ 
.__ 

Parameters__ &
.__& '
Add__' *
(__* +
new__+ .
SqliteParameter__/ >
(__> ?
$str__? H
,__H I
cat__J M
.__M N
Photo__N S
)__S T
)__T U
;__U V
commandaa 
.aa 
ExecuteNonQueryaa +
(aa+ ,
)aa, -
;aa- .
}bb 
}cc 
}dd 	
publicff 
voidff 
	DeleteCatff 
(ff 
intff !
idff" $
)ff$ %
{gg 	
usinghh 
(hh 
_dbConnectionhh  
)hh  !
{ii 
Openjj 
(jj 
)jj 
;jj 
usingkk 
(kk 
varkk 
commandkk "
=kk# $
_dbConnectionkk% 2
.kk2 3
CreateCommandkk3 @
(kk@ A
)kkA B
)kkB C
{ll 
commandmm 
.mm 
CommandTextmm '
=mm( )
$strmm* M
;mmM N
commandnn 
.nn 

Parametersnn &
.nn& '
Addnn' *
(nn* +
newnn+ .
SqliteParameternn/ >
(nn> ?
$strnn? H
,nnH I
idnnJ L
)nnL M
)nnM N
;nnN O
commandoo 
.oo 
ExecuteNonQueryoo +
(oo+ ,
)oo, -
;oo- .
}pp 
}qq 
}rr 	
publictt 
voidtt 
Opentt 
(tt 
)tt 
{uu 	
ifvv 
(vv 
_dbConnectionvv 
.vv 
Statevv #
==vv$ &
ConnectionStatevv' 6
.vv6 7
Closedvv7 =
)vv= >
_dbConnectionww 
.ww 
	OpenAsyncww '
(ww' (
)ww( )
;ww) *
}xx 	
publiczz 
voidzz 
Disposezz 
(zz 
)zz 
{{{ 	
_dbConnection|| 
.|| 
Close|| 
(||  
)||  !
;||! "
_dbConnection}} 
.}} 
Dispose}} !
(}}! "
)}}" #
;}}# $
}~~ 	
} 
}€€ Ó
ND:\Build\AzureDevOpsKats\src\AzureDevOpsKats.Data\Repository\ICatRepository.cs
	namespace 	
AzureDevOpsKats
 
. 
Data 
. 

Repository )
{ 
public 

	interface 
ICatRepository #
:$ %
IDisposable& 1
{ 
IEnumerable		 
<		 
Cat		 
>		 
GetCats		  
(		  !
)		! "
;		" #
Cat 
GetCat 
( 
int 
id 
) 
; 
void 
EditCat 
( 
Cat 
cat 
) 
; 
void 
	CreateCat 
( 
Cat 
cat 
) 
;  
void 
	DeleteCat 
( 
int 
id 
) 
; 
} 
} 